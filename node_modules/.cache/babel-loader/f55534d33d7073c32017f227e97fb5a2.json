{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import{listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Rating from'../components/Rating';import{prices,ratings}from'../utils';export default function SearchScreen(props){var _useParams=useParams(),_useParams$name=_useParams.name,name=_useParams$name===void 0?'all':_useParams$name,_useParams$category=_useParams.category,category=_useParams$category===void 0?'all':_useParams$category,_useParams$min=_useParams.min,min=_useParams$min===void 0?0:_useParams$min,_useParams$max=_useParams.max,max=_useParams$max===void 0?0:_useParams$max,_useParams$rating=_useParams.rating,rating=_useParams$rating===void 0?0:_useParams$rating,_useParams$order=_useParams.order,order=_useParams$order===void 0?'newest':_useParams$order;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productCategoryList=useSelector(function(state){return state.productCategoryList;});var loadingCategories=productCategoryList.loading,errorCategories=productCategoryList.error,categories=productCategoryList.categories;useEffect(function(){dispatch(listProducts({name:name!=='all'?name:'',category:category!=='all'?category:'',min:min,max:max,rating:rating,order:order}));},[category,dispatch,max,min,name,order,rating]);var getFilterUrl=function getFilterUrl(filter){var filterCategory=filter.category||category;var filterName=filter.name||name;var filterRating=filter.rating||rating;var sortOrder=filter.order||order;var filterMin=filter.min?filter.min:filter.min===0?0:min;var filterMax=filter.max?filter.max:filter.max===0?0:max;return\"/search/category/\".concat(filterCategory,\"/name/\").concat(filterName,\"/min/\").concat(filterMin,\"/max/\").concat(filterMax,\"/rating/\").concat(filterRating,\"/order/\").concat(sortOrder);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(\"div\",null,products.length,\" Results\"),/*#__PURE__*/React.createElement(\"div\",null,\"Sort by\",' ',/*#__PURE__*/React.createElement(\"select\",{value:order,onChange:function onChange(e){props.history.push(getFilterUrl({order:e.target.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"newest\"},\"Newest Arrivals\"),/*#__PURE__*/React.createElement(\"option\",{value:\"lowest\"},\"Price: Low to High\"),/*#__PURE__*/React.createElement(\"option\",{value:\"highest\"},\"Price: High to Low\"),/*#__PURE__*/React.createElement(\"option\",{value:\"toprated\"},\"Avg. Customer Reviews\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Department\"),/*#__PURE__*/React.createElement(\"div\",null,loadingCategories?/*#__PURE__*/React.createElement(LoadingBox,null):errorCategories?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorCategories):/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{className:'all'===category?'active':'',to:getFilterUrl({category:'all'})},\"Any\")),categories.map(function(c){return/*#__PURE__*/React.createElement(\"li\",{key:c},/*#__PURE__*/React.createElement(Link,{className:c===category?'active':'',to:getFilterUrl({category:c})},c));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Price\"),/*#__PURE__*/React.createElement(\"ul\",null,prices.map(function(p){return/*#__PURE__*/React.createElement(\"li\",{key:p.name},/*#__PURE__*/React.createElement(Link,{to:getFilterUrl({min:p.min,max:p.max}),className:\"\".concat(p.min,\"-\").concat(p.max)===\"\".concat(min,\"-\").concat(max)?'active':''},p.name));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Avg. Customer Review\"),/*#__PURE__*/React.createElement(\"ul\",null,ratings.map(function(r){return/*#__PURE__*/React.createElement(\"li\",{key:r.name},/*#__PURE__*/React.createElement(Link,{to:getFilterUrl({rating:r.rating}),className:\"\".concat(r.rating)===\"\".concat(rating)?'active':''},/*#__PURE__*/React.createElement(Rating,{caption:' & up',rating:r.rating})));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,products.length===0&&/*#__PURE__*/React.createElement(MessageBox,null,\"No Product Found\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row center\"},products.map(function(product){return/*#__PURE__*/React.createElement(Product,{key:product._id,product:product});}))))));}","map":{"version":3,"sources":["/home/rishabh/Desktop/fyp2/amazonClone/amzon-main/src/screens/SearchScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","listProducts","LoadingBox","MessageBox","Product","Rating","prices","ratings","SearchScreen","props","name","category","min","max","rating","order","dispatch","productList","state","loading","error","products","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","length","e","history","push","target","value","map","c","p","r","product","_id"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\nimport { listProducts } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { prices, ratings } from '../utils';\n\nexport default function SearchScreen(props) {\n  const {\n    name = 'all',\n    category = 'all',\n    min = 0,\n    max = 0,\n    rating = 0,\n    order = 'newest',\n  } = useParams();\n  const dispatch = useDispatch();\n  const productList = useSelector((state) => state.productList);\n  const { loading, error, products } = productList;\n\n  const productCategoryList = useSelector((state) => state.productCategoryList);\n  const {\n    loading: loadingCategories,\n    error: errorCategories,\n    categories,\n  } = productCategoryList;\n  useEffect(() => {\n    dispatch(\n      listProducts({\n        name: name !== 'all' ? name : '',\n        category: category !== 'all' ? category : '',\n        min,\n        max,\n        rating,\n        order,\n      })\n    );\n  }, [category, dispatch, max, min, name, order, rating]);\n\n  const getFilterUrl = (filter) => {\n    const filterCategory = filter.category || category;\n    const filterName = filter.name || name;\n    const filterRating = filter.rating || rating;\n    const sortOrder = filter.order || order;\n    const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\n    const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\n    return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}`;\n  };\n  return (\n    <div>\n      <div className=\"row\">\n        {loading ? (\n          <LoadingBox></LoadingBox>\n        ) : error ? (\n          <MessageBox variant=\"danger\">{error}</MessageBox>\n        ) : (\n          <div>{products.length} Results</div>\n        )}\n        <div>\n          Sort by{' '}\n          <select\n            value={order}\n            onChange={(e) => {\n              props.history.push(getFilterUrl({ order: e.target.value }));\n            }}\n          >\n            <option value=\"newest\">Newest Arrivals</option>\n            <option value=\"lowest\">Price: Low to High</option>\n            <option value=\"highest\">Price: High to Low</option>\n            <option value=\"toprated\">Avg. Customer Reviews</option>\n          </select>\n        </div>\n      </div>\n      <div className=\"row top\">\n        <div className=\"col-1\">\n          <h3>Department</h3>\n          <div>\n            {loadingCategories ? (\n              <LoadingBox></LoadingBox>\n            ) : errorCategories ? (\n              <MessageBox variant=\"danger\">{errorCategories}</MessageBox>\n            ) : (\n              <ul>\n                <li>\n                  <Link\n                    className={'all' === category ? 'active' : ''}\n                    to={getFilterUrl({ category: 'all' })}\n                  >\n                    Any\n                  </Link>\n                </li>\n                {categories.map((c) => (\n                  <li key={c}>\n                    <Link\n                      className={c === category ? 'active' : ''}\n                      to={getFilterUrl({ category: c })}\n                    >\n                      {c}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n          <div>\n            <h3>Price</h3>\n            <ul>\n              {prices.map((p) => (\n                <li key={p.name}>\n                  <Link\n                    to={getFilterUrl({ min: p.min, max: p.max })}\n                    className={\n                      `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : ''\n                    }\n                  >\n                    {p.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div>\n            <h3>Avg. Customer Review</h3>\n            <ul>\n              {ratings.map((r) => (\n                <li key={r.name}>\n                  <Link\n                    to={getFilterUrl({ rating: r.rating })}\n                    className={`${r.rating}` === `${rating}` ? 'active' : ''}\n                  >\n                    <Rating caption={' & up'} rating={r.rating}></Rating>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <div className=\"col-3\">\n          {loading ? (\n            <LoadingBox></LoadingBox>\n          ) : error ? (\n            <MessageBox variant=\"danger\">{error}</MessageBox>\n          ) : (\n            <>\n              {products.length === 0 && (\n                <MessageBox>No Product Found</MessageBox>\n              )}\n              <div className=\"row center\">\n                {products.map((product) => (\n                  <Product key={product._id} product={product}></Product>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}