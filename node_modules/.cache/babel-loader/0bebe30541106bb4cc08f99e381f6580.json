{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{createProduct,deleteProduct,listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from'../constants/productConstants';export default function ProductListScreen(props){var sellerMode=props.match.path.indexOf('/seller')>=0;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});props.history.push(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:''}));},[createdProduct,dispatch,props.history,sellerMode,successCreate,successDelete,userInfo._id]);var deleteHandler=function deleteHandler(product){if(window.confirm('Are you sure to delete?')){dispatch(deleteProduct(product._id));}};var createHandler=function createHandler(){dispatch(createProduct());};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Products\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler},\"Create Product\")),loadingDelete&&/*#__PURE__*/React.createElement(LoadingBox,null),errorDelete&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(LoadingBox,null),errorCreate&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/product/\".concat(product._id,\"/edit\"));}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);}},\"Delete\")));}))));}","map":{"version":3,"sources":["/home/rishabh/Desktop/fyp2/amazonClone/amzon-main/src/screens/ProductListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","ProductListScreen","props","sellerMode","match","path","indexOf","productList","state","loading","error","products","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","history","push","_id","seller","deleteHandler","window","confirm","createHandler","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  createProduct,\n  deleteProduct,\n  listProducts,\n} from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport {\n  PRODUCT_CREATE_RESET,\n  PRODUCT_DELETE_RESET,\n} from '../constants/productConstants';\n\nexport default function ProductListScreen(props) {\n  const sellerMode = props.match.path.indexOf('/seller') >= 0;\n  const productList = useSelector((state) => state.productList);\n  const { loading, error, products } = productList;\n\n  const productCreate = useSelector((state) => state.productCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    product: createdProduct,\n  } = productCreate;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = productDelete;\n  const userSignin = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignin;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({ type: PRODUCT_CREATE_RESET });\n      props.history.push(`/product/${createdProduct._id}/edit`);\n    }\n    if (successDelete) {\n      dispatch({ type: PRODUCT_DELETE_RESET });\n    }\n    dispatch(listProducts({ seller: sellerMode ? userInfo._id : '' }));\n  }, [\n    createdProduct,\n    dispatch,\n    props.history,\n    sellerMode,\n    successCreate,\n    successDelete,\n    userInfo._id,\n  ]);\n\n  const deleteHandler = (product) => {\n    if (window.confirm('Are you sure to delete?')) {\n      dispatch(deleteProduct(product._id));\n    }\n  };\n  const createHandler = () => {\n    dispatch(createProduct());\n  };\n  return (\n    <div>\n      <div className=\"row\">\n        <h1>Products</h1>\n        <button type=\"button\" className=\"primary\" onClick={createHandler}>\n          Create Product\n        </button>\n      </div>\n\n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n\n      {loadingCreate && <LoadingBox></LoadingBox>}\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>NAME</th>\n              <th>PRICE</th>\n              <th>CATEGORY</th>\n              <th>BRAND</th>\n              <th>ACTIONS</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.name}</td>\n                <td>{product.price}</td>\n                <td>{product.category}</td>\n                <td>{product.brand}</td>\n                <td>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() =>\n                      props.history.push(`/product/${product._id}/edit`)\n                    }\n                  >\n                    Edit\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"small\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}